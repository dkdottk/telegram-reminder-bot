"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const serverFactory = (handler) => {
    return {
        __handler: handler,
        on: () => { },
        once: () => { },
        removeListener: () => { },
        address: () => "0.0.0.0",
        listen: (_, cb) => {
            cb();
        },
    };
};
const fastifyHandler = (fastifyBuilder) => (options = {}) => {
    const app = fastifyBuilder(Object.assign(Object.assign({}, options), { serverFactory }));
    return app.listen(0).then(() => app.server.__handler);
};
exports.default = fastifyHandler;
